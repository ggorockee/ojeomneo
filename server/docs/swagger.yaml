basePath: /ojeomneo/v1
definitions:
  handler.DatabaseStatus:
    description: 데이터베이스 연결 상태
    properties:
      connected:
        example: true
        type: boolean
      latency_ms:
        example: 5
        type: integer
      message:
        example: Database connection successful
        type: string
    type: object
  handler.HealthResponse:
    description: 서버 헬스체크 응답
    properties:
      database:
        $ref: '#/definitions/handler.DatabaseStatus'
      service:
        example: ojeomneo-api
        type: string
      status:
        example: ok
        type: string
      version:
        example: 1.0.0
        type: string
    type: object
  handler.LivenessResponse:
    description: Kubernetes liveness/startup probe용 간단한 응답
    properties:
      service:
        example: ojeomneo-api
        type: string
      status:
        example: ok
        type: string
    type: object
  handler.ReadinessResponse:
    description: Kubernetes readiness probe용 응답
    properties:
      database:
        example: true
        type: boolean
      ready:
        example: true
        type: boolean
      status:
        example: ok
        type: string
    type: object
  handler.UploadFromURLRequest:
    properties:
      type:
        type: string
      url:
        type: string
    type: object
host: api.woohalabs.com
info:
  contact:
    email: support@woohalabs.com
    name: API Support
  description: Go Fiber v2 기반 REST API 서버 - 스케치 기반 메뉴 추천
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Ojeomneo API
  version: 1.0.0
paths:
  /app/version:
    get:
      consumes:
      - application/json
      description: 앱 버전을 확인하고 강제 업데이트 여부를 반환합니다
      parameters:
      - description: 플랫폼 (ios/android)
        in: query
        name: platform
        required: true
        type: string
      - description: '현재 앱 버전 (예: 1.0.0)'
        in: query
        name: current_version
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 버전 정보
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 잘못된 요청
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 버전 정보 없음
          schema:
            additionalProperties: true
            type: object
      summary: 앱 버전 확인
      tags:
      - App
  /healthcheck:
    get:
      consumes:
      - application/json
      description: 서버 및 데이터베이스 상태 상세 확인 (모니터링/디버깅용)
      produces:
      - application/json
      responses:
        "200":
          description: 상태 정보 반환 (DB 연결 실패해도 200)
          schema:
            $ref: '#/definitions/handler.HealthResponse'
      summary: 서버 상세 헬스체크
      tags:
      - Health
  /healthcheck/live:
    get:
      consumes:
      - application/json
      description: 서버가 살아있는지 확인 (DB 연결 무관)
      produces:
      - application/json
      responses:
        "200":
          description: 서버 정상 가동 중
          schema:
            $ref: '#/definitions/handler.LivenessResponse'
      summary: Liveness 체크 (Kubernetes startup/liveness probe용)
      tags:
      - Health
  /healthcheck/ready:
    get:
      consumes:
      - application/json
      description: 서버가 트래픽을 받을 준비가 됐는지 확인 (DB 연결 포함)
      produces:
      - application/json
      responses:
        "200":
          description: 트래픽 수신 준비 완료
          schema:
            $ref: '#/definitions/handler.ReadinessResponse'
        "503":
          description: 트래픽 수신 불가 (DB 연결 실패)
          schema:
            $ref: '#/definitions/handler.ReadinessResponse'
      summary: Readiness 체크 (Kubernetes readiness probe용)
      tags:
      - Health
  /images/{id}:
    delete:
      consumes:
      - application/json
      description: Cloudflare Images에서 이미지를 삭제합니다
      parameters:
      - description: 이미지 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 삭제 성공
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 잘못된 요청
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 서버 오류
          schema:
            additionalProperties: true
            type: object
      summary: 이미지 삭제
      tags:
      - Image
  /images/upload:
    post:
      consumes:
      - multipart/form-data
      description: 이미지를 Cloudflare Images에 업로드합니다
      parameters:
      - description: 이미지 파일 (jpg, jpeg, png, gif, webp)
        in: formData
        name: file
        required: true
        type: file
      - description: 이미지 타입 (sketch, menu)
        in: formData
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 업로드 성공
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 잘못된 요청
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 서버 오류
          schema:
            additionalProperties: true
            type: object
      summary: 이미지 업로드
      tags:
      - Image
  /images/upload-url:
    post:
      consumes:
      - application/json
      description: URL에서 이미지를 가져와 Cloudflare Images에 업로드합니다
      parameters:
      - description: 업로드 요청
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/handler.UploadFromURLRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 업로드 성공
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 잘못된 요청
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 서버 오류
          schema:
            additionalProperties: true
            type: object
      summary: URL에서 이미지 업로드
      tags:
      - Image
  /menus:
    get:
      consumes:
      - application/json
      description: 메뉴 목록을 조회합니다. 카테고리와 태그로 필터링할 수 있습니다.
      parameters:
      - description: 카테고리 필터 (korean, chinese, japanese, western, asian, snack, cafe,
          other)
        in: query
        name: category
        type: string
      - description: 태그 필터
        in: query
        name: tag
        type: string
      - default: 1
        description: 페이지 번호
        in: query
        name: page
        type: integer
      - default: 20
        description: 페이지당 개수
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 메뉴 목록 조회
      tags:
      - menu
  /menus/{id}:
    get:
      consumes:
      - application/json
      description: 메뉴 ID로 상세 정보를 조회합니다.
      parameters:
      - description: 메뉴 ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
      summary: 메뉴 상세 조회
      tags:
      - menu
  /menus/categories:
    get:
      consumes:
      - application/json
      description: 사용 가능한 메뉴 카테고리 목록을 조회합니다.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: 카테고리 목록 조회
      tags:
      - menu
  /sketch/{id}:
    get:
      consumes:
      - application/json
      description: 스케치 ID로 상세 정보를 조회합니다
      parameters:
      - description: 스케치 UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
      summary: 스케치 상세 조회
      tags:
      - sketch
  /sketch/analyze:
    post:
      consumes:
      - multipart/form-data
      description: 스케치 이미지를 분석하여 감정/분위기를 파악하고 어울리는 메뉴를 추천합니다
      parameters:
      - description: 스케치 이미지 (PNG/JPEG, max 5MB)
        in: formData
        name: image
        required: true
        type: file
      - description: 추가 텍스트 입력
        in: formData
        name: text
        type: string
      - description: 디바이스 식별자
        in: formData
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      summary: 스케치 분석 및 메뉴 추천
      tags:
      - sketch
  /sketch/history:
    get:
      consumes:
      - application/json
      description: 디바이스별 스케치 분석 히스토리를 조회합니다
      parameters:
      - description: 디바이스 식별자
        in: query
        name: device_id
        required: true
        type: string
      - default: 1
        description: 페이지 번호
        in: query
        name: page
        type: integer
      - default: 10
        description: 페이지당 개수
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      summary: 스케치 히스토리 조회
      tags:
      - sketch
schemes:
- https
- http
swagger: "2.0"
